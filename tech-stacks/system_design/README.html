<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.14.4/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.14.4"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.14.4/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root, jsonOptions) => {
        const markmap = getMarkmap();
        window.mm = markmap.Markmap.create('svg#mindmap', (getOptions || markmap.deriveOptions)(jsonOptions), root);
      })(() => window.markmap,null,{"type":"heading","depth":0,"payload":{"lines":[0,1]},"content":"System Design","children":[{"type":"heading","depth":1,"payload":{"lines":[2,3]},"content":"Overview","children":[{"type":"list_item","depth":2,"payload":{"lines":[4,5]},"content":"Learn about System Design components"}]},{"type":"heading","depth":1,"payload":{"lines":[6,7]},"content":"Topics","children":[{"type":"bullet_list","depth":2,"payload":{"lines":[8,11]},"content":"","children":[{"type":"list_item","depth":3,"payload":{"lines":[8,9]},"content":"[x] <strong>CDN</strong>","children":[{"type":"list_item","depth":4,"payload":{"lines":[9,10]},"content":"geographically democratize the data storage so that the data is closer to the user during read. So, for application with write/read ratio as 1:10, it is better to use CDN."}]}]},{"type":"bullet_list","depth":2,"payload":{"lines":[13,21]},"content":"","children":[{"type":"list_item","depth":3,"payload":{"lines":[13,14]},"content":"[x] <strong>Database selection</strong>","children":[{"type":"list_item","depth":4,"payload":{"lines":[15,16]},"content":"There are cases where relational DB is better than NoSQL DB. E.g. if the data is highly structured and the data is not changing frequently, then relational DB is better. Like in Instagram, in order to create shorts, the data is highly structured and the data is not changing frequently. So, relational (<strong>SQL</strong>) DB is better to store the user data. But, then there is a need to store the video metadata. So, in this case, <strong>NoSQL</strong> DB is better. Because it can be used to store the video metadata inclusive of video properties - thumbnail, title, description, etc. Also, NoSQL DB is good for recommendation algorithm as it can be fed into a recommendation algorithm faster due to low latency.","children":[{"type":"paragraph","depth":5,"payload":{"lines":[17,18]},"content":"Note that the file (video) storage is done into Amazon S3 cloud storage here."}]},{"type":"list_item","depth":4,"payload":{"lines":[19,20]},"content":"<strong>DB</strong> storage is <strong>NOT</strong> recommended for image, video storage in form of encoded format. As the user grows, DB cost is going to be very high. So, it is better to store the image, video in form of encoded format in cloud storage like <strong>Amazon S3</strong>."}]}]},{"type":"bullet_list","depth":2,"payload":{"lines":[23,36]},"content":"","children":[{"type":"list_item","depth":3,"payload":{"lines":[23,24]},"content":"[x] <strong>Vertical scaling</strong> (<strong>up/down</strong> <code>⬆️</code>/<code>⬇️</code>) is the process of increasing or reducing the size or power of a single instance in order to help it better respond to changing workloads. Vertical scaling enables you to increase or reduce the amount of memory, CPU cores, network bandwidth and other resources available to each individual instance. It is often used to improve performance or to increase the number of instances to handle more requests or users.","children":[{"type":"list_item","depth":4,"payload":{"lines":[25,26]},"content":"Use cases:","children":[{"type":"list_item","depth":5,"payload":{"lines":[26,27]},"content":"Used in non-distributed systems like databases, ROS, etc."}]},{"type":"list_item","depth":4,"payload":{"lines":[27,28]},"content":"So, in a computer system, the processor, ram and storage are the components that can be scaled vertically."},{"type":"list_item","depth":4,"payload":{"lines":[28,29]},"content":"In AWS, increase the <strong>size</strong> of the instance."},{"type":"list_item","depth":4,"payload":{"lines":[32,33]},"content":"In the similar eg as previous, a bigger car has to be hired in order to accommodate more people. So, <strong>the capacity of the car</strong> is increased."}]}]},{"type":"bullet_list","depth":2,"payload":{"lines":[38,57]},"content":"","children":[{"type":"list_item","depth":3,"payload":{"lines":[38,39]},"content":"[x] <strong>Horizontal Scaling</strong> (<strong>in/out</strong> <code>&gt;---&lt;</code> <code>&lt;---&gt;</code>) is the process of increasing or decreasing the capacity of a cloud environment by adding or removing instances. Horizontal scaling allows you to quickly increase or decrease the amount of computing power you have available and is often used to adjust your environment to accommodate more requests or users.","children":[{"type":"list_item","depth":4,"payload":{"lines":[40,41]},"content":"Use cases:","children":[{"type":"list_item","depth":5,"payload":{"lines":[41,43]},"content":"Used in distributed systems/microservices based. Hosting your app in multiple AZs (Availability Zones) across the globe.<br>\n<img src=\"../../img/system_design_horizontal_scaling_aws_multiple_az.png\" alt=\"\">"},{"type":"list_item","depth":5,"payload":{"lines":[43,44]},"content":"in load balancer (multi AZ)"},{"type":"list_item","depth":5,"payload":{"lines":[44,45]},"content":"in auto scaling group (multi AZ)"}]},{"type":"list_item","depth":4,"payload":{"lines":[45,46]},"content":"Features:","children":[{"type":"list_item","depth":5,"payload":{"lines":[46,47]},"content":"High availability is on the line of the horizontal scaling."},{"type":"list_item","depth":5,"payload":{"lines":[47,48]},"content":"make it more available to the users by having them hosted across multiple AZs (Availability Zones) across the globe."},{"type":"list_item","depth":5,"payload":{"lines":[48,49]},"content":"It will help your users reduce failures of one or two data centres going down."}]},{"type":"list_item","depth":4,"payload":{"lines":[49,50]},"content":"Cons: very expensive as more identical resources would be required."},{"type":"list_item","depth":4,"payload":{"lines":[50,51]},"content":"So, in a computer system, more computers can be added to the system in order to increase the capacity of the system. This is called horizontal scaling."},{"type":"list_item","depth":4,"payload":{"lines":[51,53]},"content":"In AWS, increase the <strong>number</strong> of instances in the Auto Scaling Group.<br>\n<img src=\"../../img/system_design_horizontal_scaling_aws.png\" alt=\"\">"}]}]},{"type":"bullet_list","depth":2,"payload":{"lines":[59,61]},"content":"","children":[{"type":"list_item","depth":3,"payload":{"lines":[59,60]},"content":"[x] <strong>Horizontal vs Vertical Scaling comparo</strong>"}]},{"type":"table","depth":2,"payload":{"lines":[61,68]},"content":"","children":[{"type":"thead","depth":3,"payload":{"lines":[61,62]},"content":"","children":[{"type":"th","depth":4,"payload":{"lines":[61,62]},"content":"Horizontal Scaling"},{"type":"th","depth":4,"payload":{"lines":[61,62]},"content":"Vertical Scaling"}]},{"type":"tbody","depth":3,"payload":{"lines":[63,68]},"content":"","children":[{"type":"tr","depth":4,"payload":{},"content":"","children":[{"type":"td","depth":5,"payload":{},"content":"Load balancing required"},{"type":"td","depth":5,"payload":{},"content":"N/A"}]},{"type":"tr","depth":4,"payload":{},"content":"","children":[{"type":"td","depth":5,"payload":{},"content":"<strong>Resilient</strong>"},{"type":"td","depth":5,"payload":{},"content":"Single point of failure"}]},{"type":"tr","depth":4,"payload":{},"content":"","children":[{"type":"td","depth":5,"payload":{},"content":"Network calls (RPC)"},{"type":"td","depth":5,"payload":{},"content":"Shared memory i.e. <strong>inter-process communication</strong>"}]},{"type":"tr","depth":4,"payload":{},"content":"","children":[{"type":"td","depth":5,"payload":{},"content":"Data inconsistency i.e. delay in having the same data across all instances"},{"type":"td","depth":5,"payload":{},"content":"Data <strong>consistency</strong>"}]},{"type":"tr","depth":4,"payload":{},"content":"","children":[{"type":"td","depth":5,"payload":{},"content":"<strong>Scales as users increases i.e. via adding more instances</strong>"},{"type":"td","depth":5,"payload":{},"content":"Hardware limit"}]}]}]},{"type":"blockquote","depth":2,"payload":{"lines":[69,72]},"content":"","children":[{"type":"paragraph","depth":3,"payload":{"lines":[69,70]},"content":"Now, the question is, when to use which scaling technique?"},{"type":"paragraph","depth":3,"payload":{"lines":[71,72]},"content":"Both are important. But, it depends on the use case. If the use case is such that the data is not changing frequently, then vertical scaling is better. But, if the data is changing frequently, then horizontal scaling is better. Moreover, keep a note of the bolded points in the table above."}]},{"type":"bullet_list","depth":2,"payload":{"lines":[73,91]},"content":"","children":[{"type":"list_item","depth":3,"payload":{"lines":[73,74]},"content":"[x] Cloud storage selection","children":[{"type":"list_item","depth":4,"payload":{"lines":[74,75]},"content":"Amazon S3 is used for storing the video files or large files. The reasons for this are:","children":[{"type":"list_item","depth":5,"payload":{"lines":[75,76]},"content":"reliability (99.999999999%) as there are multiple copies of the data stored in different AZs (Availability Zones) across the globe."},{"type":"list_item","depth":5,"payload":{"lines":[76,77]},"content":"high throughput during read/write"},{"type":"list_item","depth":5,"payload":{"lines":[77,78]},"content":"low latency due to CDN"}]}]},{"type":"list_item","depth":3,"payload":{"lines":[78,79]},"content":"[ ] Rate limiting","children":[{"type":"list_item","depth":4,"payload":{"lines":[79,80]},"content":"Ideally it means if there is a limit of some activity to be done in a given time period. E.g. in <strong>TikTok</strong>, suppose there is a limit of 3 short videos that can be uploaded in 10 hrs. So, if a user tries to upload more than 3 short videos in 10 hrs, then the user will be blocked for the next 10 hrs."}]},{"type":"list_item","depth":3,"payload":{"lines":[80,81]},"content":"[ ] Caching","children":[{"type":"list_item","depth":4,"payload":{"lines":[81,82]},"content":"recommended to use Redis"}]},{"type":"list_item","depth":3,"payload":{"lines":[82,83]},"content":"[ ] Message Broker","children":[{"type":"list_item","depth":4,"payload":{"lines":[83,84]},"content":"recommended to use Redis"}]},{"type":"list_item","depth":3,"payload":{"lines":[84,85]},"content":"[ ] Low Level Design"},{"type":"list_item","depth":3,"payload":{"lines":[85,86]},"content":"[ ] High Level Design"},{"type":"list_item","depth":3,"payload":{"lines":[86,87]},"content":"[ ] Load balancing"},{"type":"list_item","depth":3,"payload":{"lines":[87,88]},"content":"[ ] Microservices"},{"type":"list_item","depth":3,"payload":{"lines":[88,89]},"content":"[ ] Monolithic vs Microservices"},{"type":"list_item","depth":3,"payload":{"lines":[89,90]},"content":"[ ] Containerization"}]}]},{"type":"heading","depth":1,"payload":{"lines":[91,92]},"content":"References","children":[{"type":"list_item","depth":2,"payload":{"lines":[93,94]},"content":"<a href=\"https://www.youtube.com/watch?v=xpDnVSmNFX0&amp;list=PLMCXHnjXnTnvo6alSjVkgxV-VH6EPyvoX\">System Design YT playlist | Gaurav Sen</a>"},{"type":"list_item","depth":2,"payload":{"lines":[94,95]},"content":"<a href=\"https://www.youtube.com/watch?v=gktZsX9Z8Kw&amp;list=PLMCXHnjXnTnvQVh7WsgZ8SurU1O2v_UM7\">Low level design | Gaurav Sen</a>"},{"type":"list_item","depth":2,"payload":{"lines":[95,96]},"content":"<a href=\"https://www.youtube.com/watch?v=B3zrIwz_t4M&amp;list=PLTCrU9sGybupCpY20eked6blbHI4zZ55k\">Low level design | sudoCODE</a>"},{"type":"list_item","depth":2,"payload":{"lines":[96,97]},"content":"<a href=\"https://www.youtube.com/watch?v=YE1ytf15WOQ\">Vertical Scalability vs Horizontal Scalability | Visual Explanations</a> ✅"},{"type":"list_item","depth":2,"payload":{"lines":[97,98]},"content":"<a href=\"https://youtu.be/xpDnVSmNFX0\">System Design Basics: Horizontal vs. Vertical Scaling | Gaurav Sen</a> ✅"}]}]},{})</script>
</body>
</html>
